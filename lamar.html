<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Lamar - Prasetya Studio</title>
<link rel="icon" href="images/logo duwa.png" type="image/png">
<script src="https://cdn.tailwindcss.com"></script>
<link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
<link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;600;700&display=swap" rel="stylesheet">
<style>
body { font-family: 'Manrope', sans-serif; background-color: #f5f7fa; }
.whatsapp-float { position: fixed; bottom: 20px; right: 20px; z-index:50; }
.card-form { background-color: #ffffff; padding: 2rem; border-radius: 0.75rem; box-shadow: 0 4px 20px rgba(0,0,0,0.1); transition: transform 0.3s ease, box-shadow 0.3s ease; }
.card-form:hover { transform: translateY(-5px); box-shadow: 0 10px 25px rgba(0,0,0,0.15); }
label { font-weight: 600; }
.text-custom-blue { color: #3B83F6; }
.bg-custom-blue { background-color: #3B83F6; }
a.custom-hover:hover { color: #3B83F6; }
button:hover { opacity: 0.9; }

#captchaText {
  font-size: 28px;
  font-weight: bold;
  letter-spacing: 5px;
  background: linear-gradient(135deg, #e0e0e0, #f5f5f5);
  color: #2d3748;
  padding: 8px 16px;
  border-radius: 8px;
  display: inline-block;
  user-select: none;
  font-family: monospace;
  text-shadow: 2px 2px 3px rgba(0,0,0,0.2);
}

</style>
</head>
<body class="flex flex-col min-h-screen">

<!-- Header -->
<header class="bg-white shadow-md mb-8 sticky top-0 z-50 w-full">
  <div class="flex justify-between items-center py-4 px-6 w-full">
    <div class="flex items-center gap-3">
      <img src="images/ logo duwa.png" alt="Prasetya Studio" class="h-10 w-10 object-contain">
      <h1 class="text-2xl font-bold text-custom-blue">Prasetya Studio</h1>
    </div>
  </div>
</header>

<main class="flex-1 p-6">
  <h2 id="jobTitle" class="text-3xl md:text-4xl font-bold text-center mb-4 text-custom-blue">Form Lamaran</h2>
  <p class="text-center text-gray-700 mb-8 max-w-2xl mx-auto text-lg">
    Silakan lengkapi form berikut sesuai data diri dan persyaratan lowongan. Pastikan semua dokumen telah diunggah sesuai ketentuan.
  </p>

  <!-- Form -->
  <form id="lamaranForm" class="space-y-6 max-w-5xl mx-auto card-form">
    <!-- Data Diri -->
    <div class="grid md:grid-cols-2 gap-4">
      <input type="hidden" name="posisi" id="posisiInput">
      <div><label>Nama Lengkap</label><input type="text" name="nama" required class="border rounded px-3 py-2 w-full mt-1"></div>
      <div><label>Tempat Lahir</label><input type="text" name="tempatLahir" required class="border rounded px-3 py-2 w-full mt-1"></div>
      <div><label>Email Aktif</label><input type="email" name="email" required class="border rounded px-3 py-2 w-full mt-1"></div>
      <div><label>Nomor WhatsApp</label><input type="tel" name="noWa" required class="border rounded px-3 py-2 w-full mt-1"></div>
      <div><label>Tanggal Lahir</label><input type="date" name="tanggalLahir" required class="border rounded px-3 py-2 w-full mt-1"></div>
      <div><label>Alamat</label><input type="text" name="alamat" required class="border rounded px-3 py-2 w-full mt-1"></div>
      <div><label>Provinsi</label><input type="text" name="provinsi" required class="border rounded px-3 py-2 w-full mt-1"></div>
      <div><label>Kabupaten/Kota</label><input type="text" name="kabupaten" required class="border rounded px-3 py-2 w-full mt-1"></div>
      <div><label>Kecamatan</label><input type="text" name="kecamatan" required class="border rounded px-3 py-2 w-full mt-1"></div>
      <div><label>Desa</label><input type="text" name="desa" required class="border rounded px-3 py-2 w-full mt-1"></div>
    </div>

    <div><label>Alamat Lengkap</label><input type="text" name="alamatLengkap" required class="border rounded px-3 py-2 w-full mt-1"></div>

    <!-- Pendidikan -->
    <div class="grid md:grid-cols-2 gap-4">
      <div>
        <label>Pendidikan Terakhir</label>
        <select name="pendidikan" required class="border rounded px-3 py-2 w-full mt-1">
          <option value="">Pilih Pendidikan</option>
          <option value="SLTA">SLTA</option>
          <option value="D3/D4">D3/D4</option>
          <option value="S1">S1</option>
          <option value="S2">S2</option>
        </select>
      </div>
      <div>
        <label>Pengalaman Kerja/PKL/Magang</label>
        <textarea name="pengalaman" rows="3" class="border rounded px-3 py-2 w-full mt-1"></textarea>
      </div>
    </div>

    <!-- Link Google Drive CV -->
<div>
  <label>Link Google Drive CV <span class="text-red-500">*</span></label>
  <input type="url" name="cv" required 
         placeholder="https://drive.google.com/..."
         class="border rounded px-3 py-2 w-full mt-1">
  <p class="text-xs text-gray-500 mt-1">
    üìå Upload CV ke Google Drive ‚Üí klik kanan file ‚Üí <b>Bagikan</b> ‚Üí pilih 
    <b>Siapa saja dengan link</b> ‚Üí <b>Penampil (Viewer)</b> ‚Üí salin link ‚Üí tempel di sini.
  </p>
</div>

<!-- Link Google Drive Portofolio (opsional) -->
<div>
  <label>Link Google Drive Portofolio (opsional)</label>
  <input type="url" name="portofolio" 
         placeholder="https://drive.google.com/..."
         class="border rounded px-3 py-2 w-full mt-1">
  <p class="text-xs text-gray-500 mt-1">
    üìå (Opsional) Upload portofolio ke Google Drive ‚Üí atur link jadi 
    <b>Siapa saja dengan link</b>, lalu tempel di sini.
  </p>
</div>

    <!-- CAPTCHA -->
    <div class="flex items-center space-x-2 mt-3">
  <span id="captchaText"></span>
  <button type="button" onclick="generateCaptcha()" 
    class="px-3 py-1 bg-gray-200 rounded hover:bg-gray-300">
    üîÑ
  </button>
</div>
<input type="text" id="captcha" name="captcha" placeholder="Masukkan kode di atas" required
  class="mt-2 border p-2 w-full rounded">

     <!-- Checkbox izin akses -->
  <div class="mt-4">
    <label class="flex items-center space-x-2 text-gray-700">
      <input type="checkbox" id="izin" class="h-4 w-4 text-blue-600 border-gray-300 rounded">
      <span>Izinkan kami mengakses identitas Anda untuk proses lamaran</span>
    </label>
  </div>

  <!-- Tombol submit -->
  <button id="submitBtn" type="submit" disabled
    class="w-full mt-4 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 disabled:bg-gray-400">
    Kirim Lamaran
  </button>

  <!-- Status -->
  <p id="status" class="text-center text-gray-600 mt-2"></p>
</form>

<script>
  const izin = document.getElementById('izin');
  const submitBtn = document.getElementById('submitBtn');

  // aktifkan tombol hanya kalau checkbox dicentang
  izin.addEventListener('change', function () {
    submitBtn.disabled = !this.checked;
  });

  </script>

<!-- Footer -->
<footer class="bg-white shadow-inner rounded-lg p-6 text-gray-600 text-sm mt-12">
  <div class="flex flex-col md:flex-row justify-between">
    <div>
      <p>¬© 2025 Prasetya Studio. All rights reserved.</p>
      <p>Banjarnegara, Jawa Tengah, Indonesia</p>
    </div>
    <div class="mt-2 md:mt-0">
      <p>Email: prasetystudioservicehub@gmail.com</p>
      <p>Telp: +62 851 - 4308 - 0554</p>
    </div>
  </div>
</footer>

<!-- Floating -->
<div class="fixed bottom-6 right-6 flex flex-col gap-3 z-50">
  <a href="https://wa.me/6285143080554" target="_blank" class="bg-green-500 w-14 h-14 flex items-center justify-center rounded-full shadow-lg hover:bg-green-600 transition">
    <i class='bx bxl-whatsapp text-2xl text-white'></i>
  </a>
  <a href="/home" class="bg-blue-500 w-14 h-14 flex items-center justify-center rounded-full shadow-lg hover:bg-blue-600 transition">
    <i class='bx bx-home text-2xl text-white'></i>
  </a>
</div>

<!-- EmailJS -->
 <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
<script>
(function(){
  emailjs.init("kd_kqfA1KOAAQ62rR"); // ganti dengan Public Key EmailJS kamu
})();

const urlParams = new URLSearchParams(window.location.search);
const posisi = urlParams.get('posisi') || 'Lowongan';
document.getElementById('jobTitle').innerText = 'Lamaran untuk posisi: ' + posisi;
document.getElementById('posisiInput').value = posisi; // isi hidden input

let captchaCode = '';
function generateCaptcha(){ 
  // bikin kombinasi huruf + angka random
  const chars = 'ABCDEFGHJKLMNPQRSTUVWXYZ23456789';
  captchaCode = '';
  for (let i = 0; i < 5; i++) {
    captchaCode += chars.charAt(Math.floor(Math.random() * chars.length));
  }

  // tampilkan di #captchaText
  document.getElementById('captchaText').innerText = captchaCode;
}

// tampilkan captcha saat pertama kali load
window.onload = () => {
  generateCaptcha();
};

// Kirim form
document.getElementById('lamaranForm').addEventListener('submit', function(e) {
  e.preventDefault();
  
  const captchaInput = document.getElementById('captcha').value;
  const status = document.getElementById('status');

  if (captchaInput !== captchaCode) {
    status.innerText = "‚ùå Captcha salah, coba lagi.";
    return;
  }

  status.innerText = "‚è≥ Mengirim lamaran...";

  emailjs.sendForm('service_mopti4p', 'template_b6zgmjk', this)
    .then(() => {
      status.innerText = "‚úÖ Lamaran berhasil dikirim!";
      this.reset();
      generateCaptcha(); // refresh captcha
    })
    .catch((error) => {
      console.error(error);
      status.innerText = "‚ùå Gagal mengirim lamaran, coba lagi.";
    });
});
</script>
</body>
</html>
